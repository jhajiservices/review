<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Jhaji Services - Quick Review</title>
  <style>
    body{font-family:Arial,Helvetica,sans-serif;background:#f4f7fb;margin:0;padding:18px;color:#111}
    .card{max-width:820px;margin:12px auto;background:#fff;padding:18px;border-radius:10px;box-shadow:0 8px 30px rgba(0,0,0,0.06)}
    h1{margin:0 0 8px 0}
    .list{display:grid;gap:10px;margin-top:14px}
    .item{padding:12px;border-radius:8px;background:#f7fff9;cursor:pointer;border:1px solid transparent}
    .item:hover{transform:translateY(-3px);box-shadow:0 10px 20px rgba(8,120,60,0.06)}
    .selected{background:#e6fbec;border-color:#78c778}
    #selectedBox{display:none;margin-top:12px;padding:12px;border-radius:8px;background:#fff9f0;border:1px solid #efd8b0}
    .action{margin-top:12px}
    .btn{width:100%;padding:12px;border-radius:10px;border:none;background:linear-gradient(90deg,#0b75ef,#0066d6);color:#fff;font-weight:700;cursor:pointer}
    .btn:disabled{opacity:0.6;cursor:not-allowed}
  </style>
</head>
<body>
  <div class="card">
    <h1>Jhaji Services ‚Äî Quick Review Suggestions</h1>
    <p style="margin:6px 0 0 0;color:#555">Click a suggestion ‚Üí then click "Copy & Post Review ‚úçüèª" to open Google and paste the review.</p>

    <div id="list" class="list" aria-label="review suggestions"></div>

    <div id="selectedBox">
      <div><strong>Selected:</strong></div>
      <div id="selectedText" style="margin-top:8px"></div>
    </div>

    <div class="action">
      <button id="actionBtn" class="btn" disabled>Copy & Post Review ‚úçüèª</button>
    </div>
  </div>

<script>
  const GMB_LINK = "https://g.page/r/CV0F0rtdcU-_EBE/review";
  const listEl = document.getElementById('list');
  const selectedBox = document.getElementById('selectedBox');
  const selectedTextEl = document.getElementById('selectedText');
  const actionBtn = document.getElementById('actionBtn');

  let reviews = [];
  let selectedText = "";

  // load reviews.json with cache-bust
  fetch('reviews.json?ts=' + Date.now(), {cache:'no-store'})
    .then(r => { if(!r.ok) throw 0; return r.json(); })
    .then(js => { reviews = js.reviews || []; render(); })
    .catch(() => { reviews = ["Great service! Very professional and quick.","Excellent experience!"]; render(); });

  function render(){
    listEl.innerHTML = '';
    reviews.forEach((txt) => {
      const d = document.createElement('div');
      d.className = 'item';
      d.tabIndex = 0;
      d.innerText = txt;
      d.addEventListener('click', ()=> selectReview(d, txt));
      d.addEventListener('keydown', (e)=> { if(e.key === 'Enter' || e.key===' ') selectReview(d, txt); });
      listEl.appendChild(d);
    });
    // auto-select first if exists
    const first = document.querySelector('.item');
    if(first) first.click();
  }

  function selectReview(el, txt){
    document.querySelectorAll('.item').forEach(i=>i.classList.remove('selected'));
    el.classList.add('selected');
    selectedText = txt;
    selectedTextEl.innerText = txt;
    selectedBox.style.display = 'block';
    actionBtn.disabled = false;
  }

  async function copyAndOpen(){
    if(!selectedText) return;
    try{ await navigator.clipboard.writeText(selectedText); }
    catch(e){ /* ignore */ }
    // open GMB review page
    window.open(GMB_LINK, '_blank');
  }

  actionBtn.addEventListener('click', copyAndOpen);
  actionBtn.addEventListener('keydown', (e)=> { if(e.key === 'Enter' || e.key===' ') copyAndOpen(); });
</script>
</body>
</html>
